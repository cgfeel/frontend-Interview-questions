# 整理网络相关的面试题

以下问题来自 `gate.io` 1 面：

### `http/2` 相对于 `http/1.1` 更新了什么？

<details>

<summary>`HTTP/2` 相对于 `HTTP/1.1` 有以下主要更新：</summary>

**一、二进制分帧层**

在 `HTTP/2` 中，引入了二进制分帧层。`HTTP/1.1` 的报文是基于文本的，而 `HTTP/2` 将报文分割为更小的帧，并且以二进制格式传输。这带来了几个好处：

1. 更高效的解析：二进制格式的帧可以更快速地被解析，减少了处理时间。
2. 多路复用：允许在同一个连接上同时发送多个请求和响应，而无需按照顺序依次进行。每个请求和响应都被分割成不同的帧，它们可以交错传输，极大地提高了传输效率。

**二、多路复用**

`HTTP/1.1` 中，如果客户端同时发起多个请求，这些请求需要依次排队等待响应，即使它们所请求的资源可以并行获取。而在 `HTTP/2` 中：

1. 并行传输：多个请求和响应可以在同一个连接上同时进行传输，无需等待。这大大减少了页面加载时间，特别是对于包含大量资源的页面。
2. 消除队头阻塞：在 `HTTP/1.1` 中，如果一个请求出现问题，会阻塞后续请求的处理。而 `HTTP/2` 的多路复用机制消除了这种队头阻塞问题，一个请求的问题不会影响其他请求的传输。

**三、头部压缩**

`HTTP/2` 使用 `HPACK` 压缩算法对头部信息进行压缩：

1. 减少传输开销：`HTTP` 请求和响应的头部通常包含大量重复的信息，如 `Cookie`、`User-Agent` 等。通过压缩头部，可以显著减少传输的数据量，提高传输效率。
2. 动态表更新：`HPACK` 算法维护了一个动态表，用于存储已经出现过的头部字段和值。对于重复出现的头部信息，可以使用更短的编码进行传输。

**四、服务器推送**

`HTTP/2` 允许服务器主动向客户端推送资源：

1. 提前加载：服务器可以根据客户端的请求，预测客户端可能需要的其他资源，并主动将这些资源推送给客户端。这样，当客户端真正需要这些资源时，可以直接从缓存中获取，减少了请求的延迟。
2. 优化用户体验：对于一些首次访问的页面，服务器推送可以提前加载关键资源，提高页面的加载速度，提升用户体验。

> 但是 `chrome` 关闭了 `HTTP/2` 的服务推送：https://developer.chrome.com/blog/removing-push?hl=zh-cn

</details>

### 请聊一下 `http3`？

<details>

<summary>HTTP/3 是 HTTP 协议的一个重要演进版本，具有多方面的改进和特点，以下是对 HTTP/3 的详细介绍：</summary>

### 1. 基础协议的变化：

**从 `TCP` 到 `UDPs`**

`HTTP/1.1` 和 `HTTP/2` 都是基于 `TCP` 协议的，而 `HTTP/3` 则基于 `UDP` 协议。`TCP` 是一种面向连接、可靠的传输协议，但在一些情况下，如网络拥塞时，可能会出现队头阻塞等问题，影响传输效率。`UDP` 是一种无连接的协议，本身不可靠，但 `HTTP/3` 在 `UDP` 的基础上进行了改进和增强，使其能够提供可靠的传输服务。

> `HTTP/1.1` 和 `HTTP/2` 都是基于 `TCP` 协议，而 `HTTP/3` 选择 `UDP` 协议主要是为了解决 `TCP` 协议存在的一些问题。虽然 `TCP` 是一种可靠的、面向连接的传输协议，但在某些情况下，比如网络拥塞时，`TCP` 的性能表现可能不尽如人意，会出现连接建立时间长、队头阻塞等问题。而 `UDP` 是一种无连接的、不可靠的传输协议，本身不具备 `TCP` 的复杂拥塞控制和连接管理机制，但正因为如此，它在一些方面具有优势，比如更低的延迟和更高的传输效率。
>
> 为了在 `UDP` 协议的基础上实现可靠的数据传输，`HTTP/3` 采用了 `QUIC`（Quick UDP Internet Connections）协议。`QUIC` 协议在 `UDP` 之上实现了类似 `TCP` 的可靠性、拥塞控制、流量控制等功能，同时还具有一些额外的优势，如减少连接建立时间、支持连接迁移等。所以，`HTTP/3` 实际上是基于 `QUIC` 协议的，而 `QUIC` 协议是基于 `UDP` 协议的，这使得 `HTTP/3` 能够在保持高效传输的同时，提供可靠的数据传输服务。

### 2. 主要优势：

**多路复用改进：**

在 `HTTP/2` 中已经实现了多路复用，可以在一个连接上同时发送多个请求和响应，提高了传输效率。但 `HTTP/2` 的多路复用是基于 `TCP` 有序字节流的，在丢包的情况下仍然可能会出现队头阻塞问题，导致后续的请求和响应被阻塞。`HTTP/3` 基于 `UDP` 实现了真正的多路复用，每个请求和响应都被分割成独立的帧，这些帧可以在不同的流中并发传输，即使某个帧丢失，也不会影响其他帧的传输，极大地提高了传输效率和并发能力。

</details>
