# 整理网络相关的面试题

以下问题来自 `gate.io` 1 面：

### `http/2` 相对于 `http/1.1` 更新了什么？

<details>

<summary>`HTTP/2` 相对于 `HTTP/1.1` 有以下主要更新：</summary>

**一、二进制分帧层**

在 `HTTP/2` 中，引入了二进制分帧层。`HTTP/1.1` 的报文是基于文本的，而 `HTTP/2` 将报文分割为更小的帧，并且以二进制格式传输。这带来了几个好处：

1. 更高效的解析：二进制格式的帧可以更快速地被解析，减少了处理时间。
2. 多路复用：允许在同一个连接上同时发送多个请求和响应，而无需按照顺序依次进行。每个请求和响应都被分割成不同的帧，它们可以交错传输，极大地提高了传输效率。

**二、多路复用**

`HTTP/1.1` 中，如果客户端同时发起多个请求，这些请求需要依次排队等待响应，即使它们所请求的资源可以并行获取。而在 `HTTP/2` 中：

1. 并行传输：多个请求和响应可以在同一个连接上同时进行传输，无需等待。这大大减少了页面加载时间，特别是对于包含大量资源的页面。
2. 消除队头阻塞：在 `HTTP/1.1` 中，如果一个请求出现问题，会阻塞后续请求的处理。而 `HTTP/2` 的多路复用机制消除了这种队头阻塞问题，一个请求的问题不会影响其他请求的传输。

**三、头部压缩**

`HTTP/2` 使用 `HPACK` 压缩算法对头部信息进行压缩：

1. 减少传输开销：`HTTP` 请求和响应的头部通常包含大量重复的信息，如 `Cookie`、`User-Agent` 等。通过压缩头部，可以显著减少传输的数据量，提高传输效率。
2. 动态表更新：`HPACK` 算法维护了一个动态表，用于存储已经出现过的头部字段和值。对于重复出现的头部信息，可以使用更短的编码进行传输。

**四、服务器推送**

`HTTP/2` 允许服务器主动向客户端推送资源：

1. 提前加载：服务器可以根据客户端的请求，预测客户端可能需要的其他资源，并主动将这些资源推送给客户端。这样，当客户端真正需要这些资源时，可以直接从缓存中获取，减少了请求的延迟。
2. 优化用户体验：对于一些首次访问的页面，服务器推送可以提前加载关键资源，提高页面的加载速度，提升用户体验。

> 但是 `chrome` 关闭了 `HTTP/2` 的服务推送：https://developer.chrome.com/blog/removing-push?hl=zh-cn

</details>
